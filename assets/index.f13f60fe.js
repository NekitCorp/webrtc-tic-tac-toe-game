var We=Object.defineProperty;var Je=(t,e,n)=>e in t?We(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var E=(t,e,n)=>(Je(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function y(){}function ne(t,e){for(const n in e)t[n]=e[n];return t}function Re(t){return t()}function _e(){return Object.create(null)}function N(t){t.forEach(Re)}function pe(t){return typeof t=="function"}function j(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ye(t){return Object.keys(t).length===0}function Oe(t,...e){if(t==null)return y;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function R(t,e,n){t.$$.on_destroy.push(Oe(e,n))}function Te(t,e,n,o){if(t){const r=xe(t,e,n,o);return t[0](r)}}function xe(t,e,n,o){return t[1]&&o?ne(n.ctx.slice(),t[1](o(e))):n.ctx}function Le(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],c=Math.max(e.dirty.length,r.length);for(let l=0;l<c;l+=1)s[l]=e.dirty[l]|r[l];return s}return e.dirty|r}return e.dirty}function Pe(t,e,n,o,r,s){if(r){const c=xe(e,n,o,s);t.p(c,r)}}function Ae(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function ge(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Ne(t){return t&&pe(t.destroy)?t.destroy:y}function b(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode.removeChild(t)}function C(t){return document.createElement(t)}function G(t){return document.createTextNode(t)}function x(){return G(" ")}function K(){return G("")}function oe(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ge(t){return Array.from(t.childNodes)}function me(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function re(t,e){t.value=e==null?"":e}function Ke(t,e,n,o){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function Qe(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,o,e),r}let Y;function J(t){Y=t}function Q(){if(!Y)throw new Error("Function called outside component initialization");return Y}function Ie(t){Q().$$.on_mount.push(t)}function Ve(t){Q().$$.on_destroy.push(t)}function Xe(){const t=Q();return(e,n,{cancelable:o=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=Qe(e,n,{cancelable:o});return r.slice().forEach(c=>{c.call(t,s)}),!s.defaultPrevented}return!0}}function be(t,e){return Q().$$.context.set(t,e),e}function se(t){return Q().$$.context.get(t)}const W=[],ye=[],ee=[],Ce=[],Ze=Promise.resolve();let ae=!1;function et(){ae||(ae=!0,Ze.then(Me))}function ue(t){ee.push(t)}const ie=new Set;let Z=0;function Me(){const t=Y;do{for(;Z<W.length;){const e=W[Z];Z++,J(e),tt(e.$$)}for(J(null),W.length=0,Z=0;ye.length;)ye.pop()();for(let e=0;e<ee.length;e+=1){const n=ee[e];ie.has(n)||(ie.add(n),n())}ee.length=0}while(W.length);for(;Ce.length;)Ce.pop()();ae=!1,ie.clear(),J(t)}function tt(t){if(t.fragment!==null){t.update(),N(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ue)}}const te=new Set;let I;function V(){I={r:0,c:[],p:I}}function X(){I.r||N(I.c),I=I.p}function w(t,e){t&&t.i&&(te.delete(t),t.i(e))}function S(t,e,n,o){if(t&&t.o){if(te.has(t))return;te.add(t),I.c.push(()=>{te.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function nt(t,e){const n={},o={},r={$$scope:1};let s=t.length;for(;s--;){const c=t[s],l=e[s];if(l){for(const i in c)i in l||(o[i]=1);for(const i in l)r[i]||(n[i]=l[i],r[i]=1);t[s]=l}else for(const i in c)r[i]=1}for(const c in o)c in n||(n[c]=void 0);return n}function we(t){return typeof t=="object"&&t!==null?t:{}}function M(t){t&&t.c()}function P(t,e,n,o){const{fragment:r,on_mount:s,on_destroy:c,after_update:l}=t.$$;r&&r.m(e,n),o||ue(()=>{const i=s.map(Re).filter(pe);c?c.push(...i):N(i),t.$$.on_mount=[]}),l.forEach(ue)}function A(t,e){const n=t.$$;n.fragment!==null&&(N(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ot(t,e){t.$$.dirty[0]===-1&&(W.push(t),et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(t,e,n,o,r,s,c,l=[-1]){const i=Y;J(t);const a=t.$$={fragment:null,ctx:null,props:s,update:y,not_equal:r,bound:_e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:_e(),dirty:l,skip_bound:!1,root:e.target||i.$$.root};c&&c(a.root);let u=!1;if(a.ctx=n?n(t,e.props||{},(f,d,...p)=>{const k=p.length?p[0]:d;return a.ctx&&r(a.ctx[f],a.ctx[f]=k)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](k),u&&ot(t,f)),d}):[],a.update(),u=!0,N(a.before_update),a.fragment=o?o(a.ctx):!1,e.target){if(e.hydrate){const f=Ge(e.target);a.fragment&&a.fragment.l(f),f.forEach(D)}else a.fragment&&a.fragment.c();e.intro&&w(t.$$.fragment),P(t,e.target,e.anchor,e.customElement),Me()}J(i)}class z{$destroy(){A(this,1),this.$destroy=y}$on(e,n){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(e){this.$$set&&!Ye(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const F=[];function rt(t,e){return{subscribe:T(t,e).subscribe}}function T(t,e=y){let n;const o=new Set;function r(l){if(j(t,l)&&(t=l,n)){const i=!F.length;for(const a of o)a[1](),F.push(a,t);if(i){for(let a=0;a<F.length;a+=2)F[a][0](F[a+1]);F.length=0}}}function s(l){r(l(t))}function c(l,i=y){const a=[l,i];return o.add(a),o.size===1&&(n=e(r)||y),l(t),()=>{o.delete(a),o.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:c}}function st(t,e,n){const o=!Array.isArray(t),r=o?[t]:t,s=e.length<2;return rt(n,c=>{let l=!1;const i=[];let a=0,u=y;const f=()=>{if(a)return;u();const p=e(o?i[0]:i,c);s?c(p):u=pe(p)?p:y},d=r.map((p,k)=>Oe(p,m=>{i[k]=m,a&=~(1<<k),l&&f()},()=>{a|=1<<k}));return l=!0,f(),function(){N(d),u()}})}const fe={},de={};function ce(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}function it(t,e){const n=[];let o=ce(t);return{get location(){return o},listen(r){n.push(r);const s=()=>{o=ce(t),r({location:o,action:"POP"})};return t.addEventListener("popstate",s),()=>{t.removeEventListener("popstate",s);const c=n.indexOf(r);n.splice(c,1)}},navigate(r,{state:s,replace:c=!1}={}){s={...s,key:Date.now()+""};try{c?t.history.replaceState(s,null,r):t.history.pushState(s,null,r)}catch{t.location[c?"replace":"assign"](r)}o=ce(t),n.forEach(l=>l({location:o,action:"PUSH"}))}}}function ct(t="/"){let e=0;const n=[{pathname:t,search:""}],o=[];return{get location(){return n[e]},addEventListener(r,s){},removeEventListener(r,s){},history:{get entries(){return n},get index(){return e},get state(){return o[e]},pushState(r,s,c){const[l,i=""]=c.split("?");e++,n.push({pathname:l,search:i}),o.push(r)},replaceState(r,s,c){const[l,i=""]=c.split("?");n[e]={pathname:l,search:i},o[e]=r}}}}const lt=Boolean(typeof window<"u"&&window.document&&window.document.createElement),Se=it(lt?window:ct()),je=/^:(.+)/,ke=4,at=3,ut=2,ft=1,dt=1;function ht(t){return t===""}function pt(t){return je.test(t)}function He(t){return t[0]==="*"}function he(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function le(t){return t.replace(/(^\/+|\/+$)/g,"")}function mt(t,e){const n=t.default?0:he(t.path).reduce((o,r)=>(o+=ke,ht(r)?o+=dt:pt(r)?o+=ut:He(r)?o-=ke+ft:o+=at,o),0);return{route:t,score:n,index:e}}function _t(t){return t.map(mt).sort((e,n)=>e.score<n.score?1:e.score>n.score?-1:e.index-n.index)}function Ue(t,e){let n,o;const[r]=e.split("?"),s=he(r),c=s[0]==="",l=_t(t);for(let i=0,a=l.length;i<a;i++){const u=l[i].route;let f=!1;if(u.default){o={route:u,params:{},uri:e};continue}const d=he(u.path),p={},k=Math.max(s.length,d.length);let m=0;for(;m<k;m++){const _=d[m],H=s[m];if(_!==void 0&&He(_)){const q=_==="*"?"*":_.slice(1);p[q]=s.slice(m).map(decodeURIComponent).join("/");break}if(H===void 0){f=!0;break}let U=je.exec(_);if(U&&!c){const q=decodeURIComponent(H);p[U[1]]=q}else if(_!==H){f=!0;break}}if(!f){n={route:u,params:p,uri:"/"+s.slice(0,m).join("/")};break}}return n||o||null}function gt(t,e){return Ue([t],e)}function De(t,e){return`${le(e==="/"?t:`${le(t)}/${le(e)}`)}/`}function bt(t){let e;const n=t[9].default,o=Te(n,t,t[8],null);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),e=!0},p(r,[s]){o&&o.p&&(!e||s&256)&&Pe(o,n,r,r[8],e?Le(n,r[8],s,null):Ae(r[8]),null)},i(r){e||(w(o,r),e=!0)},o(r){S(o,r),e=!1},d(r){o&&o.d(r)}}}function yt(t,e,n){let o,r,s,{$$slots:c={},$$scope:l}=e,{basepath:i="/"}=e,{url:a=null}=e;const u=se(fe),f=se(de),d=T([]);R(t,d,h=>n(6,r=h));const p=T(null);let k=!1;const m=u||T(a?{pathname:a}:Se.location);R(t,m,h=>n(5,o=h));const _=f?f.routerBase:T({path:i,uri:i});R(t,_,h=>n(7,s=h));const H=st([_,p],([h,$])=>{if($===null)return h;const{path:O}=h,{route:L,uri:qe}=$;return{path:L.default?O:L.path.replace(/\*.*$/,""),uri:qe}});function U(h){const{path:$}=s;let{path:O}=h;if(h._path=O,h.path=De($,O),typeof window>"u"){if(k)return;const L=gt(h,o.pathname);L&&(p.set(L),k=!0)}else d.update(L=>(L.push(h),L))}function q(h){d.update($=>{const O=$.indexOf(h);return $.splice(O,1),$})}return u||(Ie(()=>Se.listen($=>{m.set($.location)})),be(fe,m)),be(de,{activeRoute:p,base:_,routerBase:H,registerRoute:U,unregisterRoute:q}),t.$$set=h=>{"basepath"in h&&n(3,i=h.basepath),"url"in h&&n(4,a=h.url),"$$scope"in h&&n(8,l=h.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128){const{path:h}=s;d.update($=>($.forEach(O=>O.path=De(h,O._path)),$))}if(t.$$.dirty&96){const h=Ue(r,o.pathname);p.set(h)}},[d,m,_,i,a,o,r,s,l,c]}class Ct extends z{constructor(e){super(),B(this,e,yt,bt,j,{basepath:3,url:4})}}const wt=t=>({params:t&4,location:t&16}),ve=t=>({params:t[2],location:t[4]});function Ee(t){let e,n,o,r;const s=[kt,St],c=[];function l(i,a){return i[0]!==null?0:1}return e=l(t),n=c[e]=s[e](t),{c(){n.c(),o=K()},m(i,a){c[e].m(i,a),v(i,o,a),r=!0},p(i,a){let u=e;e=l(i),e===u?c[e].p(i,a):(V(),S(c[u],1,1,()=>{c[u]=null}),X(),n=c[e],n?n.p(i,a):(n=c[e]=s[e](i),n.c()),w(n,1),n.m(o.parentNode,o))},i(i){r||(w(n),r=!0)},o(i){S(n),r=!1},d(i){c[e].d(i),i&&D(o)}}}function St(t){let e;const n=t[10].default,o=Te(n,t,t[9],ve);return{c(){o&&o.c()},m(r,s){o&&o.m(r,s),e=!0},p(r,s){o&&o.p&&(!e||s&532)&&Pe(o,n,r,r[9],e?Le(n,r[9],s,wt):Ae(r[9]),ve)},i(r){e||(w(o,r),e=!0)},o(r){S(o,r),e=!1},d(r){o&&o.d(r)}}}function kt(t){let e,n,o;const r=[{location:t[4]},t[2],t[3]];var s=t[0];function c(l){let i={};for(let a=0;a<r.length;a+=1)i=ne(i,r[a]);return{props:i}}return s&&(e=new s(c())),{c(){e&&M(e.$$.fragment),n=K()},m(l,i){e&&P(e,l,i),v(l,n,i),o=!0},p(l,i){const a=i&28?nt(r,[i&16&&{location:l[4]},i&4&&we(l[2]),i&8&&we(l[3])]):{};if(s!==(s=l[0])){if(e){V();const u=e;S(u.$$.fragment,1,0,()=>{A(u,1)}),X()}s?(e=new s(c()),M(e.$$.fragment),w(e.$$.fragment,1),P(e,n.parentNode,n)):e=null}else s&&e.$set(a)},i(l){o||(e&&w(e.$$.fragment,l),o=!0)},o(l){e&&S(e.$$.fragment,l),o=!1},d(l){l&&D(n),e&&A(e,l)}}}function Dt(t){let e,n,o=t[1]!==null&&t[1].route===t[7]&&Ee(t);return{c(){o&&o.c(),e=K()},m(r,s){o&&o.m(r,s),v(r,e,s),n=!0},p(r,[s]){r[1]!==null&&r[1].route===r[7]?o?(o.p(r,s),s&2&&w(o,1)):(o=Ee(r),o.c(),w(o,1),o.m(e.parentNode,e)):o&&(V(),S(o,1,1,()=>{o=null}),X())},i(r){n||(w(o),n=!0)},o(r){S(o),n=!1},d(r){o&&o.d(r),r&&D(e)}}}function vt(t,e,n){let o,r,{$$slots:s={},$$scope:c}=e,{path:l=""}=e,{component:i=null}=e;const{registerRoute:a,unregisterRoute:u,activeRoute:f}=se(de);R(t,f,_=>n(1,o=_));const d=se(fe);R(t,d,_=>n(4,r=_));const p={path:l,default:l===""};let k={},m={};return a(p),typeof window<"u"&&Ve(()=>{u(p)}),t.$$set=_=>{n(13,e=ne(ne({},e),ge(_))),"path"in _&&n(8,l=_.path),"component"in _&&n(0,i=_.component),"$$scope"in _&&n(9,c=_.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&o&&o.route===p&&n(2,k=o.params);{const{path:_,component:H,...U}=e;n(3,m=U)}},e=ge(e),[i,o,k,m,r,f,d,p,l,c,s]}class $e extends z{constructor(e){super(),B(this,e,vt,Dt,j,{path:8,component:0})}}class Fe{constructor(){E(this,"peerConnection",new RTCPeerConnection({iceServers:[{urls:"stun:stun.gmx.net"}]}));E(this,"dataChannel",null);E(this,"localDescription",T(""));E(this,"messages",T([]));E(this,"connectionState",T(this.peerConnection.connectionState));E(this,"iceConnectionState",T(this.peerConnection.iceConnectionState));E(this,"handleIceCandidate",e=>{console.log("[HANDLE ICE CANDIDATE]",e),e.candidate===null&&this.localDescription.set(JSON.stringify(this.peerConnection.localDescription))});E(this,"handleConnectionStateChange",e=>{const n=e.target.connectionState;console.log("handleConnectionStateChange",n),this.connectionState.set(n)});E(this,"handleIceConnectionStateChange",e=>{const n=e.target.iceConnectionState;console.log("handleIceConnectionStateChange",n),this.iceConnectionState.set(n)});E(this,"handleDataChannel",e=>this.setDataChannel(e.channel));E(this,"setDataChannel",e=>{this.dataChannel=e,this.dataChannel.onopen=this.handleDataChannelOpen,this.dataChannel.onmessage=this.handleDataChannelMessage});E(this,"handleDataChannelOpen",e=>console.log("dataChannel open",e));E(this,"handleDataChannelMessage",e=>{console.log("dataChannel message",e),this.messages.update(n=>[...n,`[${new Date().toLocaleString()}] ${e.data}`])});this.peerConnection.onicecandidate=this.handleIceCandidate,this.peerConnection.onconnectionstatechange=this.handleConnectionStateChange,this.peerConnection.oniceconnectionstatechange=this.handleIceConnectionStateChange,this.peerConnection.ondatachannel=this.handleDataChannel}setRemoteDescription(e){return this.peerConnection.setRemoteDescription(new RTCSessionDescription(JSON.parse(e))).then(()=>{console.log("[SET REMOTE DESCRIPTION]",e)},n=>{console.error("setRemoteDescription failed",n)})}connectToDataChannel(e){this.setRemoteDescription(e),this.peerConnection.createAnswer().then(n=>{console.log("createAnswer done",n),this.peerConnection.setLocalDescription(n).then(()=>{console.log("setLocalDescription done")},o=>{console.error("setLocalDescription failed",o)})},n=>{console.error("createAnswer failed",n)})}sendMessage(e){this.dataChannel.send(e),this.messages.update(n=>[...n,`[${new Date().toLocaleString()}] ${e}`])}}class Et extends Fe{connectToDataChannel(e){this.setRemoteDescription(e),this.peerConnection.createAnswer().then(n=>{console.log("[CREATE ANSWER]",n),this.peerConnection.setLocalDescription(n).then(()=>{console.log("[SET LOCAL DESCRIPTION]")},o=>{console.error("setLocalDescription failed",o)})},n=>{console.error("createAnswer failed",n)})}}class $t extends Fe{createDataChannel(e="sendDataChannel"){this.setDataChannel(this.peerConnection.createDataChannel(e)),this.peerConnection.createOffer().then(n=>{console.log("[CREATE OFFER]",n),this.peerConnection.setLocalDescription(n).then(()=>{console.log("[SET LOCAL DESCRIPTION]")},o=>{console.error("setLocalDescription failed",o)})},n=>{console.error("createOffer failed",n)})}}function Be(t){const e=()=>{t&&typeof t.select=="function"&&t.select()};return t.addEventListener("focus",e),{destroy(){t.removeEventListener("focus",e)}}}function Rt(t){let e,n=t[0].join(`
`)+"",o,r,s,c,l,i,a,u;return{c(){e=C("div"),o=G(n),r=x(),s=C("form"),c=C("input"),l=x(),i=C("button"),i.textContent="Send message",g(e,"class","standard-dialog center chat svelte-7lsohs"),g(c,"type","text"),g(c,"class","input svelte-7lsohs"),g(c,"placeholder","Type your message here"),g(i,"class","btn"),g(i,"type","submit")},m(f,d){v(f,e,d),b(e,o),v(f,r,d),v(f,s,d),b(s,c),re(c,t[1]),b(s,l),b(s,i),a||(u=[oe(c,"input",t[3]),oe(s,"submit",t[2])],a=!0)},p(f,[d]){d&1&&n!==(n=f[0].join(`
`)+"")&&me(o,n),d&2&&c.value!==f[1]&&re(c,f[1])},i:y,o:y,d(f){f&&D(e),f&&D(r),f&&D(s),a=!1,N(u)}}}function Ot(t,e,n){let{messages:o}=e,r="";const s=Xe(),c=i=>{i.preventDefault(),s("send",r),n(1,r="")};function l(){r=this.value,n(1,r)}return t.$$set=i=>{"messages"in i&&n(0,o=i.messages)},[o,r,c,l]}class ze extends z{constructor(e){super(),B(this,e,Ot,Rt,j,{messages:0})}}function Tt(t){let e,n,o,r,s;return{c(){e=C("div"),n=C("h1"),n.textContent="Wrong connection state",o=x(),r=C("p"),s=G(t[0]),g(n,"class","dialog-text"),g(r,"class","dialog-text"),g(e,"class","standard-dialog center")},m(c,l){v(c,e,l),b(e,n),b(e,o),b(e,r),b(r,s)},p(c,l){l&1&&me(s,c[0])},i:y,o:y,d(c){c&&D(e)}}}function xt(t){let e,n;return e=new ze({props:{messages:t[2]}}),e.$on("send",t[6]),{c(){M(e.$$.fragment)},m(o,r){P(e,o,r),n=!0},p(o,r){const s={};r&4&&(s.messages=o[2]),e.$set(s)},i(o){n||(w(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){A(e,o)}}}function Lt(t){let e,n,o,r,s,c,l;return{c(){e=C("div"),n=C("h1"),n.textContent="Send your local offer to player #1",o=x(),r=C("textarea"),g(n,"class","dialog-text"),g(r,"rows",10),Ke(r,"width","100%"),r.value=s=window.btoa(t[1]),g(e,"class","standard-dialog center")},m(i,a){v(i,e,a),b(e,n),b(e,o),b(e,r),c||(l=Ne(Be.call(null,r)),c=!0)},p(i,a){a&2&&s!==(s=window.btoa(i[1]))&&(r.value=s)},i:y,o:y,d(i){i&&D(e),c=!1,l()}}}function Pt(t){let e,n,o,r;const s=[Lt,xt,Tt],c=[];function l(i,a){return i[0]==="connecting"?0:i[0]==="connected"?1:2}return e=l(t),n=c[e]=s[e](t),{c(){n.c(),o=K()},m(i,a){c[e].m(i,a),v(i,o,a),r=!0},p(i,[a]){let u=e;e=l(i),e===u?c[e].p(i,a):(V(),S(c[u],1,1,()=>{c[u]=null}),X(),n=c[e],n?n.p(i,a):(n=c[e]=s[e](i),n.c()),w(n,1),n.m(o.parentNode,o))},i(i){r||(w(n),r=!0)},o(i){S(n),r=!1},d(i){c[e].d(i),i&&D(o)}}}function At(t,e,n){let o,r,s;const c=new Et,{localDescription:l,messages:i,connectionState:a}=c;R(t,l,d=>n(1,r=d)),R(t,i,d=>n(2,s=d)),R(t,a,d=>n(0,o=d));const u=new URLSearchParams(window.location.search);c.connectToDataChannel(window.atob(u.get("offer")));function f(d){d.detail&&c.sendMessage(d.detail)}return[o,r,s,l,i,a,f]}class Nt extends z{constructor(e){super(),B(this,e,At,Pt,j,{})}}function It(t){let e,n,o,r,s;return{c(){e=C("div"),n=C("h1"),n.textContent="Wrong connection state",o=x(),r=C("p"),s=G(t[2]),g(n,"class","dialog-text"),g(r,"class","dialog-text"),g(e,"class","standard-dialog center")},m(c,l){v(c,e,l),b(e,n),b(e,o),b(e,r),b(r,s)},p(c,l){l&4&&me(s,c[2])},i:y,o:y,d(c){c&&D(e)}}}function Mt(t){let e,n;return e=new ze({props:{messages:t[3]}}),e.$on("send",t[8]),{c(){M(e.$$.fragment)},m(o,r){P(e,o,r),n=!0},p(o,r){const s={};r&8&&(s.messages=o[3]),e.$set(s)},i(o){n||(w(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){A(e,o)}}}function jt(t){let e,n,o,r,s,c,l,i;return{c(){e=C("div"),n=C("h1"),n.textContent='Then, paste the "answer" you received',o=x(),r=C("textarea"),s=x(),c=C("button"),c.textContent="Okay, I pasted it.",g(n,"class","dialog-text"),g(r,"rows",10),g(c,"class","btn svelte-1tgt4dg"),g(e,"class","standard-dialog center")},m(a,u){v(a,e,u),b(e,n),b(e,o),b(e,r),re(r,t[0]),b(e,s),b(e,c),l||(i=[oe(r,"input",t[10]),oe(c,"click",t[7])],l=!0)},p(a,u){u&1&&re(r,a[0])},i:y,o:y,d(a){a&&D(e),l=!1,N(i)}}}function Ht(t){let e,n,o,r,s,c;return{c(){e=C("div"),n=C("h1"),n.textContent="Send link to player #2",o=x(),r=C("textarea"),g(n,"class","dialog-text"),g(r,"rows",10),r.value=t[1],g(e,"class","standard-dialog center")},m(l,i){v(l,e,i),b(e,n),b(e,o),b(e,r),s||(c=Ne(Be.call(null,r)),s=!0)},p(l,i){i&2&&(r.value=l[1])},i:y,o:y,d(l){l&&D(e),s=!1,c()}}}function Ut(t){let e,n,o,r;const s=[Ht,jt,Mt,It],c=[];function l(i,a){return i[2]==="new"?0:i[2]==="connecting"?1:i[2]==="connected"?2:3}return e=l(t),n=c[e]=s[e](t),{c(){n.c(),o=K()},m(i,a){c[e].m(i,a),v(i,o,a),r=!0},p(i,[a]){let u=e;e=l(i),e===u?c[e].p(i,a):(V(),S(c[u],1,1,()=>{c[u]=null}),X(),n=c[e],n?n.p(i,a):(n=c[e]=s[e](i),n.c()),w(n,1),n.m(o.parentNode,o))},i(i){r||(w(n),r=!0)},o(i){S(n),r=!1},d(i){c[e].d(i),i&&D(o)}}}function Ft(t,e,n){let o,r,s,c,l="";const i=new $t,{localDescription:a,messages:u,connectionState:f}=i;R(t,a,m=>n(9,r=m)),R(t,u,m=>n(3,c=m)),R(t,f,m=>n(2,s=m));function d(){l&&i.setRemoteDescription(atob(l))}function p(m){m.detail&&i.sendMessage(m.detail)}Ie(()=>{i.createDataChannel()});function k(){l=this.value,n(0,l)}return t.$$.update=()=>{t.$$.dirty&512&&n(1,o=`${window.location.href}client?offer=${window.btoa(r)}`)},[l,o,s,c,a,u,f,d,p,r,k]}class Bt extends z{constructor(e){super(),B(this,e,Ft,Ut,j,{})}}function zt(t){let e,n,o,r;return e=new $e({props:{path:"client",component:Nt}}),o=new $e({props:{path:"/",component:Bt}}),{c(){M(e.$$.fragment),n=x(),M(o.$$.fragment)},m(s,c){P(e,s,c),v(s,n,c),P(o,s,c),r=!0},p:y,i(s){r||(w(e.$$.fragment,s),w(o.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),S(o.$$.fragment,s),r=!1},d(s){A(e,s),s&&D(n),A(o,s)}}}function qt(t){let e,n,o;return n=new Ct({props:{url:t[0],basepath:window.location.pathname,$$slots:{default:[zt]},$$scope:{ctx:t}}}),{c(){e=C("main"),M(n.$$.fragment),g(e,"class","svelte-1yrdh9e")},m(r,s){v(r,e,s),P(n,e,null),o=!0},p(r,[s]){const c={};s&1&&(c.url=r[0]),s&2&&(c.$$scope={dirty:s,ctx:r}),n.$set(c)},i(r){o||(w(n.$$.fragment,r),o=!0)},o(r){S(n.$$.fragment,r),o=!1},d(r){r&&D(e),A(n)}}}function Wt(t,e,n){let{url:o=""}=e;return t.$$set=r=>{"url"in r&&n(0,o=r.url)},[o]}class Jt extends z{constructor(e){super(),B(this,e,Wt,qt,j,{url:0})}}new Jt({target:document.getElementById("app")});
