import{R as E,S as L,i as I,s as P,L as A,c as x,m as D,t as h,a as g,d as O,b as v,o as F,e as H,f as b,g as q,h as M,j as k,k as d,l as C,n as N,p,q as u,r as j,u as m,C as z,v as y,w,x as B,y as W,z as G}from"./global.3e6b7d03.js";class J extends E{createDataChannel(e="sendDataChannel"){this.setDataChannel(this.peerConnection.createDataChannel(e)),this.peerConnection.createOffer().then(t=>{console.log("[CREATE OFFER]",t),this.peerConnection.setLocalDescription(t).then(()=>{console.log("[SET LOCAL DESCRIPTION]")},n=>{console.error("setLocalDescription failed",n)})},t=>{console.error("createOffer failed",t)})}}function K(r){let e,t,n,o,l;return{c(){e=d("div"),t=d("h1"),t.textContent="Wrong connection state",n=C(),o=d("p"),l=N(r[2]),p(t,"class","dialog-text"),p(o,"class","dialog-text"),p(e,"class","standard-dialog center")},m(s,c){b(s,e,c),u(e,t),u(e,n),u(e,o),u(o,l)},p(s,c){c&4&&j(l,s[2])},i:m,o:m,d(s){s&&k(e)}}}function Q(r){let e,t;return e=new z({props:{messages:r[3]}}),e.$on("send",r[8]),{c(){x(e.$$.fragment)},m(n,o){D(e,n,o),t=!0},p(n,o){const l={};o&8&&(l.messages=n[3]),e.$set(l)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function U(r){let e,t,n,o,l,s,c,a;return{c(){e=d("div"),t=d("h1"),t.textContent='Then, paste the "answer" you received',n=C(),o=d("textarea"),l=C(),s=d("button"),s.textContent="Okay, I pasted it.",p(t,"class","dialog-text"),p(o,"rows",10),p(s,"class","btn svelte-1tgt4dg"),p(e,"class","standard-dialog center")},m(i,f){b(i,e,f),u(e,t),u(e,n),u(e,o),y(o,r[0]),u(e,l),u(e,s),c||(a=[w(o,"input",r[10]),w(s,"click",r[7])],c=!0)},p(i,f){f&1&&y(o,i[0])},i:m,o:m,d(i){i&&k(e),c=!1,B(a)}}}function V(r){let e,t,n,o,l,s;return{c(){e=d("div"),t=d("h1"),t.textContent="Send link to player #2",n=C(),o=d("textarea"),p(t,"class","dialog-text"),p(o,"rows",10),o.value=r[1],p(e,"class","standard-dialog center")},m(c,a){b(c,e,a),u(e,t),u(e,n),u(e,o),l||(s=W(G.call(null,o)),l=!0)},p(c,a){a&2&&(o.value=c[1])},i:m,o:m,d(c){c&&k(e),l=!1,s()}}}function X(r){let e,t,n,o;const l=[V,U,Q,K],s=[];function c(a,i){return a[2]==="new"?0:a[2]==="connecting"?1:a[2]==="connected"?2:3}return e=c(r),t=s[e]=l[e](r),{c(){t.c(),n=H()},m(a,i){s[e].m(a,i),b(a,n,i),o=!0},p(a,i){let f=e;e=c(a),e===f?s[e].p(a,i):(q(),g(s[f],1,1,()=>{s[f]=null}),M(),t=s[e],t?t.p(a,i):(t=s[e]=l[e](a),t.c()),h(t,1),t.m(n.parentNode,n))},i(a){o||(h(t),o=!0)},o(a){g(t),o=!1},d(a){s[e].d(a),a&&k(n)}}}function Y(r){let e,t;return e=new A({props:{$$slots:{default:[X]},$$scope:{ctx:r}}}),{c(){x(e.$$.fragment)},m(n,o){D(e,n,o),t=!0},p(n,[o]){const l={};o&4111&&(l.$$scope={dirty:o,ctx:n}),e.$set(l)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function Z(r,e,t){let n,o,l,s,c="";const a=new J,{localDescription:i,messages:f,connectionState:$}=a;v(r,i,_=>t(9,o=_)),v(r,f,_=>t(3,s=_)),v(r,$,_=>t(2,l=_));function R(){c&&a.setRemoteDescription(atob(c))}function S(_){_.detail&&a.sendMessage(_.detail)}F(()=>{a.createDataChannel()});function T(){c=this.value,t(0,c)}return r.$$.update=()=>{r.$$.dirty&512&&t(1,n=`${window.location.href}client.html?offer=${window.btoa(o)}`)},[c,n,l,s,i,f,$,R,S,o,T]}class ee extends L{constructor(e){super(),I(this,e,Z,Y,P,{})}}new ee({target:document.getElementById("app")});
